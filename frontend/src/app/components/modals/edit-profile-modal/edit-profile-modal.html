<div *ngIf="isOpen" class="fixed inset-0 overflow-y-auto" style="z-index: 9999;" aria-labelledby="modal-title"
    role="dialog" aria-modal="true">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" (click)="onClose()"></div>

    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <!-- Modal panel -->
        <div *ngIf="isOpen"
            style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 3000; display: flex; align-items: center; justify-content: center; padding: 1rem;">
            <!-- Background overlay -->
            <div (click)="onClose()"
                style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5);">
            </div>

            <!-- Modal panel -->
            <div
                style="position: relative; background: white; border-radius: 0.5rem; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); max-width: 32rem; width: 100%; max-height: 90vh; overflow-y: auto;">

                <!-- Close button -->
                <div style="position: absolute; top: 1rem; right: 1rem;">
                    <button type="button" (click)="onClose()"
                        style="background: white; border-radius: 0.375rem; color: #9CA3AF; border: none; cursor: pointer;"
                        onmouseover="this.style.color='#6B7280'" onmouseout="this.style.color='#9CA3AF'">
                        <span class="sr-only">Close</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div style="padding: 1.5rem; text-align: left;">
                    <h3 style="font-size: 1.125rem; font-weight: 600; color: #111827; margin-bottom: 1rem;">
                        {{ 'PROFILE.TITLE' | translate }}
                    </h3>

                    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-4">
                        <div>
                            <label for="firstname" class="block text-sm font-medium text-gray-700 mb-1">{{
                                'PROFILE.FIRSTNAME' |
                                translate }}</label>
                            <input type="text" id="firstname" formControlName="firstname"
                                class="appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-psv-green focus:border-psv-green focus:z-10 sm:text-sm transition-colors duration-200">
                        </div>

                        <div>
                            <label for="lastname" class="block text-sm font-medium text-gray-700 mb-1">{{
                                'PROFILE.LASTNAME'
                                |
                                translate }}</label>
                            <input type="text" id="lastname" formControlName="lastname"
                                class="appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-psv-green focus:border-psv-green focus:z-10 sm:text-sm transition-colors duration-200">
                        </div>

                        <div>
                            <label for="mail" class="block text-sm font-medium text-gray-700 mb-1">{{ 'PROFILE.EMAIL' |
                                translate
                                }}</label>
                            <input type="email" id="mail" formControlName="mail"
                                class="appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-psv-green focus:border-psv-green focus:z-10 sm:text-sm transition-colors duration-200">
                        </div>

                        <div>
                            <label for="contact" class="block text-sm font-medium text-gray-700 mb-1">{{
                                'PROFILE.CONTACT' |
                                translate }}</label>
                            <input type="text" id="contact" formControlName="contact"
                                class="appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-psv-green focus:border-psv-green focus:z-10 sm:text-sm transition-colors duration-200">
                        </div>
                    </form>
                </div>

                <!-- Modal footer -->
                <div
                    style="background-color: #F9FAFB; padding: 0.75rem 1.5rem; display: flex; flex-direction: row-reverse; gap: 0.75rem;">
                    <button type="button" (click)="onSubmit()" [disabled]="!profileForm.valid || loading"
                        style="width: 100%; display: inline-flex; justify-content: center; border-radius: 0.375rem; border: none; padding: 0.5rem 1rem; background-color: oklch(58.7% 0.181 145.4); color: white; font-size: 0.875rem; font-weight: 500; cursor: pointer;"
                        [style.opacity]="(!profileForm.valid || loading) ? '0.5' : '1'"
                        [style.cursor]="(!profileForm.valid || loading) ? 'not-allowed' : 'pointer'"
                        onmouseover="if(!profileForm.valid || loading) return; this.style.backgroundColor='oklch(55% 0.181 145.4)'"
                        onmouseout="if(!profileForm.valid || loading) return; this.style.backgroundColor='oklch(58.7% 0.181 145.4)'">
                        {{ 'PROFILE.SAVE' | translate }}
                    </button>
                    <button type="button" (click)="onClose()"
                        style="width: 100%; display: inline-flex; justify-content: center; border-radius: 0.375rem; border: 1px solid #D1D5DB; padding: 0.5rem 1rem; background-color: white; color: #374151; font-size: 0.875rem; font-weight: 500; cursor: pointer;"
                        onmouseover="this.style.backgroundColor='#F9FAFB'"
                        onmouseout="this.style.backgroundColor='white'">
                        {{ 'PROFILE.CANCEL' | translate }}
                    </button>
                </div>
            </div>
        </div>